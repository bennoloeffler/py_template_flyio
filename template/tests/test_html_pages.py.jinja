"""
HTML page rendering tests.

Tests that HTML pages render correctly.
These tests don't require authentication or unique data.
"""

from fastapi.testclient import TestClient


class TestPublicPages:
    """Test publicly accessible HTML pages."""

    def test_root_page_renders(self, client: TestClient) -> None:
        """Test root page renders HTML."""
        response = client.get("/")
        assert response.status_code == 200
        assert "text/html" in response.headers["content-type"]

    def test_login_page_renders(self, client: TestClient) -> None:
        """Test login page renders HTML."""
        response = client.get("/login")
        assert response.status_code == 200
        assert "text/html" in response.headers["content-type"]

    def test_register_page_renders(self, client: TestClient) -> None:
        """Test register page renders HTML."""
        response = client.get("/register")
        assert response.status_code == 200
        assert "text/html" in response.headers["content-type"]

    def test_files_page_renders(self, client: TestClient) -> None:
        """Test files page renders HTML."""
        response = client.get("/files")
        assert response.status_code == 200
        assert "text/html" in response.headers["content-type"]

    def test_upload_page_renders(self, client: TestClient) -> None:
        """Test upload page renders HTML."""
        response = client.get("/upload")
        assert response.status_code == 200
        assert "text/html" in response.headers["content-type"]


class TestAPIHealth:
    """Test API health endpoint."""

    def test_health_endpoint(self, client: TestClient) -> None:
        """Test health check endpoint."""
        response = client.get("/health")
        assert response.status_code == 200

        data = response.json()
        assert data["status"] == "healthy"
        assert "version" in data
        assert "environment" in data
